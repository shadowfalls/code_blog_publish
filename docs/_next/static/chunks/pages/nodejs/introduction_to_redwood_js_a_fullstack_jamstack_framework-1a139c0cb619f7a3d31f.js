(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[927],{2605:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var n=t(5893);t(7294);function i(e){var s=e.className,t=void 0===s?"":s,i=e.href,a=void 0===i?"":i,r=e.children,o=e.target,l=void 0===o?"_blank":o,d=e.rel,c=void 0===d?"noopener noreferrer":d;return(0,n.jsx)("a",{className:t,href:a,target:l,rel:c,children:r})}},2531:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var n=t(5893),i=(t(7294),t(1590)),a=t(3273);function r(e){var s=e.width,t=void 0===s?35:s,r=e.height,o=void 0===r?36:r,l=0===(0,i.qr)().state.theme?a.W.bg.primary:a.$.bg.primary;return(0,n.jsx)("svg",{width:t,height:o,viewBox:"0 0 66 67",fill:"".concat(l),xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M66 33.5C66 52.0015 51.2254 67 33 67C14.7746 67 0 52.0015 0 33.5C0 14.9985 14.7746 0 33 0C51.2254 0 66 14.9985 66 33.5ZM30 22H37V58H30V22ZM33.5 18C35.433 18 37 16.433 37 14.5C37 12.567 35.433 11 33.5 11C31.567 11 30 12.567 30 14.5C30 16.433 31.567 18 33.5 18Z",fill:"".concat(l)})})}},5758:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var n=t(5893),i=t(7294),a=t(9008),r=t(8443),o=t(5675),l=t(7366),d=t(6767),c=t(6573),h=t(2443),p=t(6707),u=t.n(p),m=t(7073),A=t(541),g=t(1590),w=t(3971),j=t(7331),f=t(2322),x=t.n(f),b=t(2605),y=t(6538),v=t(2531),k={src:"/_next/static/image/public/blog/introduction_to_redwoodjs/redwood.db39589e1c891ef98e3319901dca067d.jpeg",height:853,width:1280,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAUAAEAAAAAAAAAAAAAAAAAAAAF/9oACAEBAAAAAA//xAAUAQEAAAAAAAAAAAAAAAAAAAAE/9oACAECEAAAAA//xAAUAQEAAAAAAAAAAAAAAAAAAAAD/9oACAEDEAAAAF//xAAbEAACAgMBAAAAAAAAAAAAAAADEQECAAQFgv/aAAgBAQABPwDaKeOeekkdWl6ef//EABgRAAIDAAAAAAAAAAAAAAAAAAECAAMh/9oACAECAQE/AKWYrpn/xAAXEQADAQAAAAAAAAAAAAAAAAAAAQIx/9oACAEDAQE/AKWH/9k="},R={src:"/_next/static/image/public/blog/introduction_to_redwoodjs/redwood_initial_setup.d1b1a0b0808d9fb36d7ee0c8cbfc8d05.png",height:1538,width:2046,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAp0lEQVR42iXNsU4CQRhF4XOZmXXGXSyMJhofwsTYWPmCvoMdLU9DKCigIvSwsMuw87OB29yvO7p0pyLn6NtW+1NnjJ7WtVJKGOAnVSWZmQTTphbOMwkBJAT4c3uw3XJBHj/EhI+RnC9QCh+fX/h8bLWaz6zbruWfnu3h5Y1uu1HJPa9///jw2Nj7zy/5+E1IDS7Gm60YvqrQcO7LrcnoYTAQzjlxn10BZXpCh9LGrRMAAAAASUVORK5CYII="},_={src:"/_next/static/image/public/blog/introduction_to_redwoodjs/homepage.92c9a6f70b3a1ff6d6714f1b1057a1e3.png",height:1280,width:2044,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAUklEQVR4nF2LUQ7AIAxCYZp4/5t6AWWvLtvHXtKGAvWcc48x1Ht3a02ypDAP8VprJ7FJfF1CiJvsEHNsRFERIYIWPhaFDYiCAsv1k6PhK7zGn9yjvinea1nSwgAAAABJRU5ErkJggg=="},N={src:"/_next/static/image/public/blog/introduction_to_redwoodjs/prisma-studio-post.f3a73f3207bb664ed92a16e239b212ee.png",height:952,width:1920,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAASElEQVR4nDWMQRKAMAgDE3H8/3ttARPG7gUmG+DOLIhu8F27SeK5A6BDjRZaUVVYOxERiItw0VBiCuaE/83gQlkotD1G0TznBxnpJ+bATTwuAAAAAElFTkSuQmCC"},C={src:"/_next/static/image/public/blog/introduction_to_redwoodjs/post_list.e52d0e618b7b77c6cad956f991508b14.png",height:952,width:1920,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAAQUlEQVR4nG2NWwoAIQwDE3r/6wrrQmKK6JdTCtPSB7/5CxsGS0JVQTbGHGAa0Q2TXbAlZAF0iD9xoi/cF8kzfJwLg7ogyP/1KA4AAAAASUVORK5CYII="},P={src:"/_next/static/image/public/blog/introduction_to_redwoodjs/add_post.9c956ac884ea6fada70ae140a8335b0b.png",height:952,width:1920,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAASUlEQVR4nE2LAQqAMAwDk+r/XytSsWZmTsYKpUeT43GmIgININHPmGbKSvC6y9hToh6ZgH2z4EYwQElfAdanvzDdHJrZ+78n8wUm1iC+2UyrIgAAAABJRU5ErkJggg=="},E={src:"/_next/static/image/public/blog/introduction_to_redwoodjs/edit_post.8f929d6bf29d85cccc126b776a3b30c4.png",height:887,width:1920,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAASElEQVR4nD2KAQ6AIAwD2/L/1xqFGNksKFyypWmPx9lCRUCCpL9Zrz4VvNodEr0KvYcXoJTPlDuGcR4wRmvsb5iZW/D9ysyTF57SHbq8ccKsAAAAAElFTkSuQmCC"},Z=x().introductionToRedwoodJs,Q=(0,y.X$)(),I="https://www.".concat(j.domain).concat(Z),T="Introduction to Redwood.js a fullstack jamstack framework",S=["Prisma","ReactJS","GraphQL","JAMstack"],U=f.articleIds.introductionToRedwoodJs,L=function(e){var s=e.children;return(0,n.jsx)("span",{className:u().highlight_text,children:s})};function D(){var e=(0,g.qr)().state,s=(0,i.useRef)(null),t=(0,i.useRef)("https://www.linkedin.com/sharing/share-offsite/?url=https://www.".concat(j.domain).concat(Z)),p=(0,i.useRef)("https://www.facebook.com/sharer/sharer.php?u=https://www.".concat(j.domain).concat(Z)),f=(0,i.useRef)();(0,i.useEffect)((function(){if(s.current&&U&&j.domain)for(var e=s.current.querySelectorAll("a"),n=0;n<e.length;n+=1)e[n].href&&(e[n].href.includes("twitter")?f.current=e[n].href:e[n].href.includes("facebook")?p.current=e[n].href:e[n].href.includes("linkedin")&&(t.current=e[n].href))}),[s]);var x=function(e){e&&window.open(e,"","width=500,height=500")},y=(0,i.useRef)("yarn create redwood-app ./my-redwood-app\nor\nnpx create-redwood-app my-redwood-app"),D=(0,i.useRef)("cd my-redwood-app\nyarn redwood dev"),B=(0,i.useRef)("\u251c\u2500\u2500 api\n\u2502   \u251c\u2500\u2500 db\n\u2502   \u2502   \u251c\u2500\u2500 schema.prisma\n\u2502   \u251c\u2500\u2500 dist\n\u2502   \u2514\u2500\u2500 src\n\u2502       \u251c\u2500\u2500 directives\n\u2502       \u2502   \u251c\u2500\u2500 requireAuth\n\u2502       \u2502   \u2514\u2500\u2500 skipAuth\n\u2502       \u251c\u2500\u2500 functions\n\u2502       \u2502   \u2514\u2500\u2500 graphql.js\n\u2502       \u251c\u2500\u2500 graphql\n\u2502       \u251c\u2500\u2500 lib\n\u2502       \u2502   \u251c\u2500\u2500 auth.js\n\u2502       \u2502   \u251c\u2500\u2500 db.js\n\u2502       \u2502   \u2514\u2500\u2500 logger.js\n\u2502       \u2514\u2500\u2500 services\n\u2502\n\u251c\u2500\u2500 scripts\n\u2502   \u2514\u2500\u2500 seed.js\n\u2502\n\u2514\u2500\u2500 web\n    \u251c\u2500\u2500 public\n    \u2502   \u251c\u2500\u2500 favicon.png\n    \u2502   \u251c\u2500\u2500 README.md\n    \u2502   \u2514\u2500\u2500 robots.txt\n    \u2514\u2500\u2500 src\n        \u251c\u2500\u2500 components\n        \u251c\u2500\u2500 layouts\n        \u251c\u2500\u2500 pages\n        \u2502   \u251c\u2500\u2500 FatalErrorPage\n        \u2502   \u2502   \u2514\u2500\u2500 FatalErrorPage.js\n        \u2502   \u2514\u2500\u2500 NotFoundPage\n        \u2502       \u2514\u2500\u2500 NotFoundPage.js\n        \u251c\u2500\u2500 App.js\n        \u251c\u2500\u2500 index.css\n        \u251c\u2500\u2500 index.html\n        \u2514\u2500\u2500 Routes.js"),F=(0,i.useRef)("yarn workspace web add react\nyarn workspace api add fs"),G=(0,i.useRef)("yarn redwood generate page home /"),J=(0,i.useRef)('datasource db {\n  provider = "sqlite"\n  url      = env("DATABASE_URL")\n}\n\ngenerator client {\n  provider      = "prisma-client-js"\n  binaryTargets = "native"\n}\n\n// Define your own datamodels here and run \'yarn redwood prisma migrate dev\'\n// to create migrations for them and apply to your dev DB.\n// TODO: Please remove the following example:\nmodel Post {\n  id        Int      @id @default(autoincrement())\n  title     String\n  body      String\n  createdAt DateTime @default(now())\n}\n\n'),W=(0,i.useRef)("yarn rw prisma migrate dev"),K=(0,i.useRef)("yarn rw prisma generate"),Y=(0,i.useRef)("import { db } from 'api/src/lib/db'\n\nexport default async () => {\n  try {\n    const data = [\n      { title: 'learn redwood', body: 'Redwood is a fullstack framework' },\n    ]\n    Promise.all(\n      data.map(async (data) => {\n        const record = await db.post.create({ data })\n        console.log(record)\n      })\n    )\n  } catch (error) {\n    console.warn('Please define your seed data.')\n    console.error(error)\n  }\n}\n"),M=(0,i.useRef)("yarn rw prisma db seed"),q=(0,i.useRef)("yarn rw prisma studio"),V=(0,i.useRef)("yarn rw generate scaffold post"),H=(0,i.useRef)("import Post from 'src/components/Post/Post'\n\nexport const QUERY = gql`\n  query FindPostById($id: Int!) {\n    post: post(id: $id) {\n      id\n      title\n      body\n      createdAt\n    }\n  }\n`\n\nexport const Loading = () => <div>Loading...</div>\n\nexport const Empty = () => <div>Post not found</div>\n\nexport const Failure = ({ error }) => (\n  <div className=\"rw-cell-error\">{error.message}</div>\n)\n\nexport const Success = ({ post }) => {\n  return <Post post={post} />\n}\n");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.default,{children:[(0,n.jsx)("title",{children:T}),(0,n.jsx)(A.Z,{blogTitle:T,blogDescription:"Redwood is the full-stack web framework designed to help you grow from side project to startup",coverImage:"/blog/introduction_to_prisma/prisma.jpg",currentBlogUrl:I,datePublished:"Fri, 24 June 2022 10:07:00 -0500",dateModified:Q,estimatedReadingTimeInMinutes:8,keywords:S.join(", ")})]}),(0,n.jsx)(h.Z,{}),(0,n.jsxs)("div",{ref:s,className:"d-none",children:[(0,n.jsx)(r.Twitter,{link:I}),(0,n.jsx)(r.Facebook,{link:I}),(0,n.jsx)(r.Linkedin,{link:I})]}),(0,n.jsxs)("article",{className:"container ".concat(u().blog_container),itemScope:!0,itemType:"http://schema.org/Article",children:[(0,n.jsxs)("div",{className:u().blog_header_container,children:[(0,n.jsx)("header",{children:(0,n.jsx)("h1",{itemProp:"name",className:u().blog_title,children:T})}),(0,n.jsx)("figure",{children:(0,n.jsx)(o.default,{alt:"",className:u().blog_image,src:k,width:"1748",height:"1249"})}),(0,n.jsxs)("div",{className:u().blog_large_screens,children:[(0,n.jsxs)("div",{className:u().sub_header,children:[(0,n.jsx)("div",{className:"d-flex justify-content-left ".concat(u().blog_tags),children:S.map((function(e){return(0,n.jsx)("div",{className:u().tag,children:e},e)}))}),(0,n.jsxs)("div",{className:u().read_time,children:[8," Minute Read"]})]}),(0,n.jsxs)("div",{className:"d-flex justify-content-right mt-30",children:[(0,n.jsx)("a",{"aria-label":"facebook",className:"mr-30 cursor-pointer",rel:"noopener noreferrer",onClick:function(){return x(p.current)},children:(0,n.jsx)(l.Z,{})}),(0,n.jsx)("a",{"aria-label":"facebook",className:"mr-30 cursor-pointer",rel:"noopener noreferrer",onClick:function(){return x(f.current)},children:(0,n.jsx)(d.Z,{})}),(0,n.jsx)("a",{"aria-label":"facebook",className:"mr-30 cursor-pointer",rel:"noopener noreferrer",onClick:function(){return x(t.current)},children:(0,n.jsx)(c.Z,{})})]})]}),(0,n.jsxs)("div",{className:u().blog_small_screens,children:[(0,n.jsxs)("div",{className:u().sub_header,children:[(0,n.jsx)("div",{className:"d-flex justify-content-left ".concat(u().blog_tags),children:S.map((function(e){return(0,n.jsx)("div",{className:u().tag,children:e},e)}))}),(0,n.jsxs)("div",{className:u().read_time,children:[8," Minute Read"]})]}),(0,n.jsxs)("div",{className:"d-flex justify-content-right mt-10",children:[(0,n.jsx)("a",{"aria-label":"facebook",className:"mr-30 cursor-pointer",rel:"noopener noreferrer",onClick:function(){return x(p.current)},children:(0,n.jsx)(l.Z,{})}),(0,n.jsx)("a",{"aria-label":"twitter",className:"mr-30 cursor-pointer",rel:"noopener noreferrer",onClick:function(){return x(f.current)},children:(0,n.jsx)(d.Z,{})}),(0,n.jsx)("a",{"aria-label":"linkedin",className:"mr-30 cursor-pointer",rel:"noopener noreferrer",onClick:function(){return x(t.current)},children:(0,n.jsx)(c.Z,{})})]})]})]}),(0,n.jsx)("div",{className:"d-flex ".concat(u().blog_content),children:(0,n.jsxs)("div",{className:u().article,children:[(0,n.jsxs)("p",{children:[(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://redwoodjs.com/",children:"Redwoodjs"})," ","is a fullstack web framework. Redwood features an end-to-end development workflow that combines the best parts of"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://reactjs.org/",children:"React"}),","," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://graphql.org/",children:"GraphQL"}),","," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://www.prisma.io/",children:"Prisma"}),","," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://www.typescriptlang.org/",children:"TypeScript"}),","," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://jestjs.io/",children:"Jest"}),", and"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://storybook.js.org/",children:"Storybook"}),". Redwood is built by Tom Preston Werner (co-founder of Github). In this tutorial we will explore the different features that Redwood provides."]}),(0,n.jsx)("p",{children:"Using Redwood you can create JAMstack applications very quickly. Both the backend and the frontend code are maintained in the same project. React is used in the frontend, and a node server with GraphQL is used in the backend. Redwood has a predefined project structure"}),(0,n.jsx)("h2",{children:"Prerequisites:"}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:["Redwood requires Node.js version ",">=","14.19 ","<=","16.x"]}),(0,n.jsxs)("li",{children:["We will be going through React, Node.js, GraphQL, and Prisma in this tutorial. Some basic understanding of what they are used for can help. If you want to learn what Prisma is, you can refer"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://codeknight.in/nodejs/introduction_to_prisma",children:"this"})," ","post."]})]}),(0,n.jsx)("h2",{children:"Setup a Redwood.js project:"}),(0,n.jsx)("p",{children:"To setup a redwood project run the following command:"}),(0,n.jsx)(m.Z,{code:y.current}),(0,n.jsx)("p",{children:"Move into the project folder and run the project."}),(0,n.jsx)(m.Z,{code:D.current}),(0,n.jsxs)("p",{children:["This will automatically open the browser and will take you to"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"http://localhost:8910/",children:"http://localhost:8910"}),". If it doesn't open automatically open the browser, then open your browser and navigate to http://localhost:8910/. You should see the following"]}),(0,n.jsx)(o.default,{alt:"",className:u().result_preview_rounded,src:R}),(0,n.jsx)("p",{children:"The initial boilerplate code in the project helps to understand the overall architecture of Redwood. Lets go through the directory structure of redwood."}),(0,n.jsx)(m.Z,{code:B.current,hideCopyBtn:!0}),(0,n.jsxs)("p",{children:["Since redwood is a fullstack framework, both the backend and the frontend are present in the same project. The backend code, which is a NodeJS, is present in the"," ",(0,n.jsx)(L,{children:"api"})," directory, and the frontend is present under the"," ",(0,n.jsx)(L,{children:"web"})," directory. When you want to add a package to the project you also need to specify the workspace. For example (Don't run these commands)"]}),(0,n.jsx)(m.Z,{code:F.current,hideCopyBtn:!0}),(0,n.jsxs)("p",{children:["Here to add ",(0,n.jsx)("b",{children:"react"})," to the frontend we have specified the ",(0,n.jsx)("b",{children:"web"})," workspace and for adding ",(0,n.jsx)("b",{children:"fs"})," we have specified the ",(0,n.jsx)("b",{children:"api"})," workspace."]}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)(L,{children:"scripts"})," directory is where you can put your custom Node scripts that you many need to run from the command line. By default there will be a file called"," ",(0,n.jsx)(L,{children:"seed.js"})," which is used to populate your database with some initial data that your app might need to run properly."]}),(0,n.jsx)("h2",{children:"Exploring the folders in RedwoodJS:"}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)(L,{children:"web"})," folder is where the frontend React application is present."]}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)(L,{children:"api"})," folder is where the backend graphQL APIs are present. Lets check the folders inside the api directory."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/src"})," contains the actually code, and the"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://www.graphql-tools.com/docs/schema-directives",children:"GraphQL schema"}),"."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/db"})," contains the database schema, and migrations. We will go into more detail on this later in this tutorial."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"web/src/layouts"})," contains the layouts that we will be using in our react app. Layouts are like containers that hosts the current component/page"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"web/src/components"})," is where we can put our react components."]}),(0,n.jsx)("h2",{children:"Adding our first page:"}),(0,n.jsx)("p",{children:"Before we add our page lets understand how routing works in RedwoodJS. We can add a new page using the following command"}),(0,n.jsx)(m.Z,{code:G.current}),(0,n.jsx)("p",{children:"The above command did the following:"}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:["It created a new file called ",(0,n.jsx)(L,{children:"web/src/pages/HomePage/HomePage.js"}),"."," ",(0,n.jsx)(L,{children:"web/src/pages"}),' contains all the pages in the application. Redwood takes the name you specified as the first argument after page and PascalCases it, then appends "Page" to construct your new page component. So "home" becomes "HomePage".']}),(0,n.jsxs)("li",{children:["It creates a test file to go along with this new page component at"," ",(0,n.jsx)(L,{children:"web/src/pages/HomePage/HomePage.test.js"})," with a single, passing test."]}),(0,n.jsxs)("li",{children:["It created a Storybook file for this component at"," ",(0,n.jsx)(L,{children:"web/src/pages/HomePage/HomePage.stories.js"}),". Storybook is a wonderful tool for efficiently developing and organizing UI components. For the sake of simplicity we won't be covering"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://storybook.js.org/",children:"Storybook"})," ","in this tutorial."]}),(0,n.jsxs)("li",{children:["Adds a ","<Route>"," in web/src/Routes.js that maps the path ",(0,n.jsx)("b",{children:'"/"'})," to the new HomePage page."]})]}),(0,n.jsxs)("p",{className:"d-flex ".concat(u().quote," ").concat(0===e.theme?u().dark_quote:""),children:[(0,n.jsx)(v.Z,{}),(0,n.jsxs)("div",{className:"ml-10",children:["If you open ",(0,n.jsx)("b",{children:"web/src/Routes.js"})," file you will notice that ","<HomePage />"," component that we are referring to is not imported. Redwood automatically imports all pages in the Routes file since we're going to need to reference them all anyway."]})]}),(0,n.jsx)("p",{children:"Now the page will change to the following"}),(0,n.jsx)(o.default,{alt:"",className:u().result_preview_rounded,src:_}),(0,n.jsxs)("p",{children:["Now we will explore the ",(0,n.jsx)("b",{children:"db"})," folder."]}),(0,n.jsx)("h2",{children:"What is Prisma?"}),(0,n.jsxs)("p",{children:["Prisma is an ORM ","(","Object relational mapper",")"," for Node.js. It lets us query and do manipulations on the database with ease. It has"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://www.prisma.io/docs/concepts/components/prisma-migrate",children:"migrations"})," ","to keep the database in sync as our schema changes and is used to maintain the data in the database."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"schema.prisma"})," contains the schema with which prisma uses to create and maintain the database. Lets explore prisma by adding a simple ",(0,n.jsx)("b",{children:"Post"})," modal. We won't be covering Prisma in depth in this tutorial. We have covered Prisma in"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://codeknight.in/nodejs/introduction_to_prisma",children:"this post"}),"."]}),(0,n.jsxs)("p",{children:["You can remove any existing models in schema file and add the post modal. After adding the post modal into ",(0,n.jsx)("b",{children:"schema.prisma"})," file, it will look like the following:"]}),(0,n.jsx)(m.Z,{code:J.current}),(0,n.jsxs)("p",{children:["Under the ",(0,n.jsx)("b",{children:"datasource"})," section we have specified the provider as ",(0,n.jsx)("b",{children:"SQLite"})," and the database connection URL."]}),(0,n.jsxs)("p",{children:["Under the ",(0,n.jsx)("b",{children:"generator"})," section we have mentioned that we will be using"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://github.com/prisma/prisma-client-js",children:"prisma-client-js"})," ","in our code to access the database. This will also generate the prisma client which our app will need to access the database"]}),(0,n.jsxs)("p",{children:["Then we have the Post modal which has ",(0,n.jsx)("b",{children:"id"}),", ",(0,n.jsx)("b",{children:"title"}),", ",(0,n.jsx)("b",{children:"body"}),", and"," ",(0,n.jsx)("b",{children:"createdAt"})]}),(0,n.jsx)("h2",{children:"Prisma migration"}),(0,n.jsx)("p",{children:"As we have the database model in place we can run the prisma migration. Prisma migration does the following things"}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"It keeps the database in sync with the Prisma schema as it changes over time"}),(0,n.jsx)("li",{children:"Maintain existing data in your database"}),(0,n.jsx)("li",{children:"It will create a history of migrations files when ever we make changes to our prisma schema"})]}),(0,n.jsx)("p",{children:"Run the following command to run the prisma migration"}),(0,n.jsx)(m.Z,{code:W.current}),(0,n.jsxs)("p",{className:"d-flex ".concat(u().quote," ").concat(0===e.theme?u().dark_quote:""),children:[(0,n.jsx)(v.Z,{}),(0,n.jsxs)("div",{className:"ml-10",children:["Notice that in the above command we have used ",(0,n.jsx)("b",{children:"rw"})," instead of ",(0,n.jsx)("b",{children:"redwood"}),"."," ",(0,n.jsx)("b",{children:"rw"})," is an alias of ",(0,n.jsx)("b",{children:"redwood"})," command, going forward we will be using ",(0,n.jsx)("b",{children:"rw"}),"."]})]}),(0,n.jsxs)("p",{children:["When you run the above command, prisma will ask for a name for the migration, and after you have given a name it will create a migration file under ",(0,n.jsx)("b",{children:"api/db/migrations"})," directory."]}),(0,n.jsx)("p",{children:"Lets add a seed script to load some data into our database. Run the following command to generate the prisma client."}),(0,n.jsx)(m.Z,{code:K.current}),(0,n.jsxs)("p",{children:["Now lets add some code to the seed command to create a post in our database, open"," ",(0,n.jsx)(L,{children:"scripts/seed.js"})," file, remove the contents in the file and paste the following code into it."]}),(0,n.jsx)(m.Z,{code:Y.current}),(0,n.jsx)("p",{children:"Run the following command to run the seed command"}),(0,n.jsx)(m.Z,{code:M.current}),(0,n.jsxs)("p",{children:["Prisma has an admin interface called"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://github.com/prisma/studio",children:"Prisma studio"})," ","which allows us to see, add, and change the data in the database. To open Prisma studio run the following command"]}),(0,n.jsx)(m.Z,{code:q.current}),(0,n.jsxs)("p",{children:["Then navigate to"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"http://localhost:5555",children:"http://localhost:5555"})," ","in your browser to access prisma studio."]}),(0,n.jsx)(o.default,{alt:"",className:u().result_preview_rounded,src:N}),(0,n.jsx)("p",{children:"You will notice the post table that we created with one record. This record was added using our seed command. Feel free the explore prisma studio."}),(0,n.jsx)("h2",{children:"Scaffolding the post modal:"}),(0,n.jsxs)("p",{children:["Redwood has a scaffolding tool that will automatically generate the backend service, the graphQL definitions, and the frontend UI for performing a simple CRUD operation based on the ",(0,n.jsx)("b",{children:"post"})," modal. Before scaffold lets understand the folder structure of the backend."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/db"})," contains the database schema and migrations"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/dist"})," contains the backend build files, we won't need to concentrate on this during development"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/src/directives"})," will contain GraphQL schema directives for controlling access to queries and transforming values."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/src/functions"})," will contain any"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://docs.netlify.com/functions/overview/",children:"lambda functions"})," ","that your app will need. By default it will have the ",(0,n.jsx)(L,{children:"graphql.js"})," file which is needed for GraphQL API."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/src/graphql"})," contains your GraphQL schema written in a Schema Definition Language ","(","the files will end in ",(0,n.jsx)("b",{children:".sdl.js"}),")","."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/src/lib"})," contains a few files:"]}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"auth.js"})," has a few empty functions that can be used as a base to setup our authentication flow"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"db.js"})," has the Prisma client that we can use to communicate with the database"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"logger.js"})," is used for logging"]})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/src/services"})," is where we will be putting our business logic to manipulate the data"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/types"})," contains the automatically compiled GraphQL types and can be ignored during development"]}),(0,n.jsx)("p",{children:"Now run the following command the scaffold the Post modal"}),(0,n.jsx)(m.Z,{code:V.current}),(0,n.jsx)("p",{children:"This command has added a lot of files:"}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"api/src/services/posts/posts.js"})," is the service file that will use the prisma client to make Prisma client calls to get data in and out of the database"]}),(0,n.jsxs)("p",{children:["It added ",(0,n.jsx)(L,{children:"api/src/graphql/posts.sdl.js"})," which defines several GraphQL queries and mutations"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"web/src/pages/Post"})," contains several pages for performing the CRUD operations. Each file does what their respective file names say."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(L,{children:"web/src/layouts/PostsLayout/PostsLayout.js"}),' is the layout file that acts as the container which contains shared component like header and "New Post" button']}),(0,n.jsxs)("p",{children:["It added a few routes in ",(0,n.jsx)(L,{children:"web/src/Routes.js"})," file. Notice that the"," ",(0,n.jsx)("b",{children:"PostsLayout"})," is wrapped around all the post related routes."]}),(0,n.jsxs)("p",{children:["It added 3 cells under ",(0,n.jsx)(L,{children:"web/src/components/Post"}),", in Redwood Cells provide a simpler and more declarative approach to data fetching. We will see them in detail later in this tutorial."]}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"EditPostCell"})," gets the post to edit in the database"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"PostCell"})," gets the post to display"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"PostsCell"})," gets the post to display"]})]}),(0,n.jsxs)("p",{children:["It added 4 components under ",(0,n.jsx)(L,{children:"web/src/components/Post"})]}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"NewPost"})," displays the form for creating a new post"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"Post"})," displays a single post"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"PostForm"})," the actual form used by both the New and Edit components"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"Posts"})," displays the table of all posts"]})]}),(0,n.jsxs)("p",{children:["If you run the server and navigate to"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"http://localhost:8910/posts",children:"http://localhost:8910/posts"})," ","you will see the following screen"]}),(0,n.jsx)(o.default,{alt:"",className:u().result_preview_rounded,src:C}),(0,n.jsx)("p",{children:"Feel free to explore the pages, Click on the add post button to add a new post. You will see the following."}),(0,n.jsx)(o.default,{alt:"",className:u().result_preview_rounded,src:P}),(0,n.jsx)("p",{children:"Notice that RedwoodJS has automatically created the form by taking the fields from the post modal."}),(0,n.jsx)("p",{children:"If you click on the edit button in the list of posts, you will see that the form is pre-populated with the data from the database"}),(0,n.jsx)(o.default,{alt:"",className:u().result_preview_rounded,src:E}),(0,n.jsx)("h2",{children:"What is a Cell?"}),(0,n.jsxs)("p",{children:["In RedwoodJS"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://redwoodjs.com/docs/cells",children:"cells"})," ","are a simpler and more declarative approach to data fetching. A cell is self-contained performs the fetchs and displays its own. A cell should export several specially named constants that Redwood will understand. Lets have a look at the"," ",(0,n.jsx)("b",{children:"web/src/components/Post/PostCell"})," Cell to understand what cells are. The PostCell will looks something similar to the following"]}),(0,n.jsx)(m.Z,{code:H.current}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)("b",{children:"QUERY"})," constant contains the graphQL Query"]}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)("b",{children:"Loading"})," component will be used when the data is being fetched"]}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)("b",{children:"Empty"})," component will be displayed when there is no data"]}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)("b",{children:"Failure"})," component is rendered when there is an error"]}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)("b",{children:"Success"})," component is rendered when the API call has succeeded"]}),(0,n.jsx)("p",{children:"As you can see we have different components for the different states of a component, this makes things easy to reuse the cell in multiple places"}),(0,n.jsx)("h2",{children:"Conclusion:"}),(0,n.jsxs)("p",{children:["RedwoodJS is an awesome framework, packed with a lot of features. The"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://redwoodjs.com/",children:"documentation"})," ","for RedwoodJS is well written."]}),(0,n.jsx)("p",{children:"In this article we started with the introduction to RedwoodJS. Next we learnt the basic folder structure of the project. Then we learn how to add a page to the frontend. We got a brief introduction to Prisma and migrations. Then we scaffolded the post modal."}),(0,n.jsxs)("p",{children:["You can refer the entire source code for the above in this"," ",(0,n.jsx)(b.Z,{className:u().highlight_link,href:"https://github.com/dinesh24murali/redwoodjs_example",children:"repo"}),"."]})]})})]}),(0,n.jsx)(w.Z,{className:"".concat(u().footer," ").concat(0===e.theme?u().dark:u().light),footerTextColor:u().footer_text_color})]})}},7972:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nodejs/introduction_to_redwood_js_a_fullstack_jamstack_framework",function(){return t(5758)}])}},function(e){e.O(0,[774,710,472,888,179],(function(){return s=7972,e(e.s=s);var s}));var s=e.O();_N_E=s}]);